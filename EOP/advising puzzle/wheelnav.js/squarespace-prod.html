<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/EOPAtCal/css@v0.2/bootstrap-iso.css">
<style>
#wheelDiv {
    height: 490px;
    width: 490px;
}

#wheelDiv>svg {
    height: 100%;
    width: 100%;
}

#text-preview {
    max-width: 20rem;
}

.bootstrap-iso>.card-img-top {
    max-height: 16rem;
}

#left-side {
    margin-bottom: 1rem;
}

@media (min-width: 1200px) {
    #wheelDiv {
        height: 590px;
        width: 590px;
    }
}

@media (max-width: 768px) {
    #left-side {
        justify-content: center !important;
        margin-bottom: 1.6rem;
    }
}

@media (max-width: 992px) {
    #wheelDiv {
        height: 470px;
        width: 470px;
    }
}

@media (max-width: 576px) {
    #wheelDiv {
        height: 400px;
        width: 400px;
    }
}
</style>
<div class="bootstrap-iso">
    <div class="row">
        <div class="col-md-8 d-flex justify-content-center">
            <div id="wheelDiv">
            </div>
        </div>
        <div class="col-md-4 d-flex" id="left-side">
            <div id="text-preview" class="d-flex align-self-center">
                <div class="card">
                    <img class="card-img-top" src="http://via.placeholder.com/320x200" alt="image goes here">
                    <div class="card-block">
                        <h3 class="card-title text-capitalize"></h3>
                        <p class="card-text"></p>
                        <div>
                            <a href="#" class="btn btn-primary" target="blank">Learn More</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <p>
            At times, UC Berkeley can feel a bit overwhelming as students are learning to navigate the university in many ways. There are various advising units on campus that deliver unique support and, in some instances, reinforce standard advising practices. Advising is an essential resource that offers students academic/personal guidance, critical information, clarification on policies, and the opportunity to develop solutions and action plans. Advisors are invested in your success and are here to partner with you to help you get the most out of your time at UC Berkeley and prepare you for success after graduation. This “advising wheel” can assist you in learning about the many advising units on campus and how they can best meet your individual and ever evolving needs.
        </p>
    </div>
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/EOPAtCal/js@v0.1/squarespace.js"></script>
<script type="text/javascript">
"use strict"
var data = `
                    [
                      {
                        "title": "college advisor",
                        "text": "College advisors build relationships with students to understand their particular needs and focus on their academic & career goals.  Their primary role is to support students with general program planning and academic advising while making appropriate referrals to student services, faculty and enrichment opportunities.  College advisors also assist students in navigating college policies such as degree requirements, deadlines, unit limits, academic holds, withdrawals and more.",
                        "img": "https://static1.squarespace.com/static/51095940e4b093a50121aa90/t/5a0251fc4192021db9d29abb/1510101504587/CollegeAdvisor.png?format=300w",
                        "link": "http://www.eop.berkeley.edu/advising/college-advisor"
                      },
                      {
                        "title": "educational opportunity program",
                        "text": "The Educational Opportunity Program (EOP) serves undergraduate students who are first-generation, low-income, and/or underrepresented students. EOP Academic Counselors can support you with academic planning, financial assistance, graduate school / career exploration and building community at UC Berkeley.  The quickest way to verify your EOP eligibility is by contact our front office at 510.642.7224 or visiting 119 Chavez.  You can also apply online through our website below.",
                        "img": "https://static1.squarespace.com/static/51095940e4b093a50121aa90/t/5a0260a324a69476e0d1c00a/1510105268698/EOPAdvising.jpg?format=500w",
                        "link": "http://www.eop.berkeley.edu/advising/eop"
                      },
                      {
                        "title": "cal student central",
                        "text": "Cal Student Central (CSC) is a one-stop resource that includes the Office of Financial Aid & Scholarships, Office of the Registrar and Billing & Payment Services. CSC helps students understand their student budget, financial aid package (loans, grants/scholarships and work-study), appeals processes, etc.   Additionally, CSC assists students with billing/payment inquiries, transcripts, enrollment verifications, residency and more.",
                        "img": "https://static1.squarespace.com/static/51095940e4b093a50121aa90/t/5a0252169140b7456e42a4c1/1510101531058/CalStudentCentral.png?format=500w",
                        "link": "http://www.eop.berkeley.edu/advising/cal-student-central"
                      },
                      {
                        "title": "major advisor",
                        "text": "A Major Advisor is a department specialist who assists students in planning their academic schedule in preparation to declare and/or graduate from the desired major within a college. Students can meet with their Major Advisor to discuss questions specific to their major prerequisites or upper division requirements. Major advisors can be located by following the links below:",
                        "img": "https://static1.squarespace.com/static/51095940e4b093a50121aa90/t/5a0252f29140b7456e42cc8a/1510104639888/MajorAdvising.jpg?format=500w",
                        "link": "http://www.eop.berkeley.edu/advising/major-advisor"
                      },
                      {
                        "title": "faculty advisor",
                        "text": "Faculty advisors serve as academic/professional mentors who support students in engaging further in their academic discipline. These advisors expose students to potential career paths, internship opportunities, write letters of recommendation and can serve as a thesis advisor. Not all departments have faculty advisors; view the list of faculty advisors below.",
                        "img": "https://static1.squarespace.com/static/51095940e4b093a50121aa90/t/5a0252cbe4966b0fcddcf0ca/1510101708761/FacultyAdvisor.jpg?format=300w",
                        "link": "http://www.eop.berkeley.edu/advising/faculty-advisor"
                      },
                      {
                        "title": "peer advisors",
                        "text": "Peer Advisors are current students who use their personal experience to provide student-to-student advising and mentoring about several topics including:",
                        "img": "https://static1.squarespace.com/static/51095940e4b093a50121aa90/t/5a02527024a69476e0cf3e6c/1510101618055/PeerAdvising.jpg?format=750w",
                        "link": "http://www.eop.berkeley.edu/advising/peer-advisors"
                      },
                      {
                        "title": "disabled students program",
                        "text": "DSP currently serves more than 1,600 undergraduate and graduate students enrolled at UC Berkeley. While many people assume that students with disabilities are mostly visibly physically disabled, at present the majority of students receiving our services have invisible disabilities. These students have learning or psychological disabilities and often do not traditionally identify as people with disabilities at all (although some do).  DSP helps students with disabilities navigate that system by establishing a set of academic accommodations based on each students’ individual disability.",
                        "img": "https://static1.squarespace.com/static/51095940e4b093a50121aa90/t/5a0ccb99f9619a9983cb7301/1510787995750/8.jpg?format=1000w",
                        "link": "http://www.eop.berkeley.edu/advising/disabled-students-program"
                      },
                      {
                        "title": "additional advising resources",
                        "text": "Centers for Educational Equity & Excellence, Career Center, Study Abroad, Fall Program for Freshman, LEAD Center, Office of Undergraduate Research & Scholarships",
                        "img": "https://static1.squarespace.com/static/51095940e4b093a50121aa90/t/5a025b22652dea4ceb32a86e/1510103850032/Additional+Resources+copy.jpg?format=500w",
                        "link": "http://www.eop.berkeley.edu/advising/additional-resources"
                      }
                    ]
                    `

function shorten(text, maxLength) {
    var ret = text;
    if (ret.length > maxLength) {
        ret = ret.substr(0, maxLength);
        ret = ret.substr(0, Math.min(ret.length, ret.lastIndexOf(" "))) + "...";
    }
    return ret;
}

function getData(data) {
    return JSON.parse(data);
}

var texts = getData(data);

function displayText(ind) {
    return function() {
        document.querySelector("#text-preview > .card > .card-block > .card-title").innerText = texts[ind]["title"];
        document.querySelector("#text-preview > .card > .card-block > .card-text").innerText = texts[ind]["text"]
        document.querySelector("#text-preview > .card > img").setAttribute("src", texts[ind]["img"])
        document.querySelector("#text-preview > .card > .card-block > div > a").setAttribute("href", texts[ind]["link"])
    }
}

function render(items) {
    if (items.length === texts.length) {
        for (var i = items.length - 1; i >= 0; i--) {
            texts[i]["text"] = shorten(texts[i]["text"], 98);
            items[i].navigateFunction = displayText(i);
        }
    }

}

function renderDefault() {
    var ind = 0
    document.querySelector("#text-preview > .card > .card-block > .card-title").innerText = texts[ind]["title"];
    document.querySelector("#text-preview > .card > .card-block > .card-text").innerText = texts[ind]["text"]
    document.querySelector("#text-preview > .card > img").setAttribute("src", texts[ind]["img"])
    document.querySelector("#text-preview > .card > .card-block > div > a").setAttribute("href", texts[ind]["link"])
}

window.onload = function() {
    var titles = [
        "College \n Advisor",
        "Educational \n Opportunity \n Program",
        "Cal Student \n Central",
        "Major \n Advisor",
        "Faculty \n Advisor",
        "Peer \n Advisors",
        "Disabled \n Students \n Program",
        "Additional \n Resources"
    ]

    var wheel = new wheelnav("wheelDiv");
    wheel.slicePathFunction = slicePath().DonutSlice;
    wheel.markerEnable = true;
    wheel.animatetime = 690;
    wheel.markerPathFunction = markerPath().DropMarker;
    wheel.markerAttr = {
        fill: '#333',
        stroke: '#333'
    };
    wheel.colors = colorpalette.cal
    wheel.titleFont = '100 22px Impact, Charcoal, sans-serif';
    wheel.createWheel(titles);
    wheel.titleAttr = {
        fill: "#333"
    };
    wheel.titleSelectedAttr = {
        fill: "#FFF"
    };
    wheel.titleHoverAttr = {
        fill: "#FFF"
    };

    render(wheel.navItems);
    renderDefault();
    wheel.refreshWheel();
};
</script>
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>